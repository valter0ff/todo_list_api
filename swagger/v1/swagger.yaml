---
openapi: 3.0.1
info:
  title: API V1
  version: v1
paths:
  "/api/v1/tasks/{task_id}/comments":
    get:
      summary: Task comments index
      tags:
      - Comment
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: task_id
        in: path
        schema:
          type: integer
          example: 89
        required: true
      responses:
        '200':
          description: Task comments returned
          content:
            application/json:
              examples:
                Task comments returned:
                  value:
                    data:
                    - id: '120'
                      type: comment
                      attributes:
                        body: Daniela Nicolas
                        created_at: '2022-07-24T13:47:14.750+03:00'
                        updated_at: '2022-07-24T13:47:14.750+03:00'
                    - id: '121'
                      type: comment
                      attributes:
                        body: Carmen Tromp
                        created_at: '2022-07-24T13:47:14.765+03:00'
                        updated_at: '2022-07-24T13:47:14.765+03:00'
        '404':
          description: Invalid task id
        '401':
          description: Invalid token
    post:
      summary: Create comment
      tags:
      - Comment
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: task_id
        in: path
        schema:
          type: integer
          example: 91
        required: true
      responses:
        '201':
          description: Comment is created
          content:
            application/json:
              examples:
                Comment is created:
                  value:
                    data:
                      id: '126'
                      type: comment
                      attributes:
                        body: Brett Kris
                        created_at: '2022-07-24T13:47:15.147+03:00'
                        updated_at: '2022-07-24T13:47:15.147+03:00'
        '422':
          description: Invalid comment body
          content:
            application/json:
              examples:
                Invalid comment body:
                  value:
                    errors:
                      body:
                      - must be filled
        '404':
          description: Invalid task id
        '401':
          description: Invalid token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - comment
              properties:
                body:
                  type: string
                  example: Louella Lockman
  "/api/v1/comments/{id}":
    delete:
      summary: Delete comment
      tags:
      - Comment
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: id
        in: path
        schema:
          type: integer
          example: 86
        required: true
      responses:
        '204':
          description: Comment destroyed
        '404':
          description: Invalid comment id
        '401':
          description: Invalid token
  "/api/v1/current_user":
    get:
      summary: Show current user
      tags:
      - Current user
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      responses:
        '200':
          description: Current user is returned
          content:
            application/json:
              examples:
                Current user is returned:
                  value:
                    data:
                      id: '694'
                      type: user
                      attributes:
                        username: Edward Pouros
                        created_at: '2022-07-24T13:47:15.607+03:00'
                        updated_at: '2022-07-24T13:47:15.607+03:00'
                      relationships:
                        projects:
                          data: []
        '401':
          description: Invalid token
  "/api/v1/projects":
    post:
      summary: Create project
      tags:
      - Project
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      responses:
        '201':
          description: Project is created
          content:
            application/json:
              examples:
                Project is created:
                  value:
                    data:
                      id: '540'
                      type: project
                      attributes:
                        title: tenetur
                        created_at: '2022-07-24T13:47:15.762+03:00'
                        updated_at: '2022-07-24T13:47:15.762+03:00'
        '422':
          description: Invalid parameters
          content:
            application/json:
              examples:
                when title is invalid:
                  value:
                    errors:
                      title:
                      - The field is required.
                when project with provided title already exists:
                  value:
                    errors:
                      title:
                      - The project with such name does already exist.
        '401':
          description: Invalid token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - project
              properties:
                title:
                  type: string
                  example: inventore
  "/api/v1/projects/{id}":
    put:
      summary: Update project
      tags:
      - Project
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: id
        in: path
        schema:
          type: integer
          example: 68
        required: true
      responses:
        '200':
          description: Project is updated
          content:
            application/json:
              examples:
                Project is updated:
                  value:
                    data:
                      id: '542'
                      type: project
                      attributes:
                        title: Heike Yost
                        created_at: '2022-07-24T13:47:16.098+03:00'
                        updated_at: '2022-07-24T13:47:16.143+03:00'
        '404':
          description: Invalid project id
        '422':
          description: Project title already exists
          content:
            application/json:
              examples:
                Project title already exists:
                  value:
                    errors:
                      title:
                      - The project with such name does already exist.
        '401':
          description: Invalid token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - project
              properties:
                title:
                  type: string
                  example: dignissimos
    delete:
      summary: Destroy project
      tags:
      - Project
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: id
        in: path
        schema:
          type: integer
          example: 100
        required: true
      responses:
        '204':
          description: Project is destroyed
        '404':
          description: Invalid id
        '401':
          description: Invalid token
  "/api/v1/session":
    post:
      summary: Create session
      tags:
      - Sessions
      security:
      - Bearer: {}
      parameters: []
      responses:
        '201':
          description: Session is created
          content:
            application/json:
              examples:
                Session is created:
                  value:
                    data:
                      id: '705'
                      type: user
                      attributes:
                        username: Kurtis Krajcik
                        created_at: '2022-07-24T13:47:16.485+03:00'
                        updated_at: '2022-07-24T13:47:16.485+03:00'
                      relationships:
                        projects:
                          data:
                          - id: '548'
                            type: project
                          - id: '549'
                            type: project
                    meta:
                      csrf: IgOz4BmY4KUi+sieXQ7NAoa8kxDRc4XY2g+e2FMC0KsYEcHGJlHxgygdbSRVPMco62IFApoejhbv/qcnARFYIg==
                      access: eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2NTg2OTU2MzYsInVzZXJfaWQiOjcwNSwidWlkIjoiZTg4NGQ5NmMtMGY3ZS00ZmU1LWJkNDAtOTc1ZmNjZmUwNWNiIiwicnVpZCI6IjEwMzJlMzhhLTFjMzctNDhkOS04MWE4LTc5Y2ZhODVjMDBhMiJ9.8wsvbm9HzIYQoPDR6a3fJCg9fgAbYPxduNomDKL-ioM
                      access_expires_at: '2022-07-24T23:47:16.000+03:00'
                      refresh: eyJhbGciOiJIUzI1NiJ9.eyJleHAiOjE2NTkyNjQ0MzYsInVpZCI6IjEwMzJlMzhhLTFjMzctNDhkOS04MWE4LTc5Y2ZhODVjMDBhMiJ9.Utiz3N0_F9G1SRe9FTeiqvL3vsIyyaXpHxScwSz1A3k
                      refresh_expires_at: '2022-07-31T13:47:16.000+03:00'
                    included:
                    - id: '548'
                      type: project
                      attributes:
                        title: Carolin McClure
                        created_at: '2022-07-24T13:47:16.490+03:00'
                        updated_at: '2022-07-24T13:47:16.490+03:00'
                    - id: '549'
                      type: project
                      attributes:
                        title: Tiffany Ortiz
                        created_at: '2022-07-24T13:47:16.495+03:00'
                        updated_at: '2022-07-24T13:47:16.495+03:00'
        '404':
          description: Not found
        '401':
          description: Invalid credentials
          content:
            application/json:
              examples:
                Invalid credentials:
                  value:
                    errors:
                      base: Incorrect login or(and) password
        '422':
          description: Blank username and password
          content:
            application/json:
              examples:
                Blank username and password:
                  value:
                    errors:
                      username:
                      - The field is required.
                      password:
                      - The field is required.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - username
              - password
              properties:
                username:
                  type: string
                  example: frankie_stantonxx
                password:
                  type: string
                  example: qwerty12
    delete:
      summary: Destroys session
      tags:
      - Sessions
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      responses:
        '204':
          description: Session is destroyed
        '401':
          description: Invalid token
  "/api/v1/projects/{project_id}/tasks":
    get:
      summary: Project tasks index
      tags:
      - Task
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: project_id
        in: path
        schema:
          type: integer
          example: 82
        required: true
      responses:
        '200':
          description: Project tasks returned
          content:
            application/json:
              examples:
                Project tasks returned:
                  value:
                    data:
                    - id: '543'
                      type: task
                      attributes:
                        name: deleniti
                        created_at: '2022-07-24T13:47:17.125+03:00'
                        updated_at: '2022-07-24T13:47:17.125+03:00'
                        status: in_progress
                        position: 1
                        deadline_date: 25/07/2022
                        deadline_time: '00:00'
                    - id: '544'
                      type: task
                      attributes:
                        name: voluptates
                        created_at: '2022-07-24T13:47:17.130+03:00'
                        updated_at: '2022-07-24T13:47:17.130+03:00'
                        status: in_progress
                        position: 2
                        deadline_date: 25/07/2022
                        deadline_time: '00:00'
        '404':
          description: Invalid project id
        '401':
          description: Invalid token
    post:
      summary: Create task
      tags:
      - Task
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: project_id
        in: path
        schema:
          type: integer
          example: 57
        required: true
      responses:
        '201':
          description: Task is created
          content:
            application/json:
              examples:
                Task is created:
                  value:
                    data:
                      id: '549'
                      type: task
                      attributes:
                        name: ullam
                        created_at: '2022-07-24T13:47:17.359+03:00'
                        updated_at: '2022-07-24T13:47:17.359+03:00'
                        status: in_progress
                        position: 3
        '422':
          description: Invalid task name
          content:
            application/json:
              examples:
                Invalid task name:
                  value:
                    errors:
                      name:
                      - The field is required.
        '404':
          description: Invalid project id
        '401':
          description: Invalid token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - task
              properties:
                name:
                  type: string
                  example: ullam
  "/api/v1/tasks/{id}/is_done":
    put:
      summary: Update task status
      tags:
      - Task
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: id
        in: path
        schema:
          type: integer
          example: 89
        required: true
      responses:
        '200':
          description: Task status changed
          content:
            application/json:
              examples:
                Task status changed:
                  value:
                    data:
                      id: '554'
                      type: task
                      attributes:
                        name: laborum
                        created_at: '2022-07-24T13:47:17.690+03:00'
                        updated_at: '2022-07-24T13:47:17.724+03:00'
                        status: done
                        position: 1
                        deadline_date: 25/07/2022
                        deadline_time: '00:00'
        '404':
          description: Invalid task id
        '401':
          description: Invalid token
  "/api/v1/tasks/{id}":
    put:
      summary: Update task
      tags:
      - Task
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: id
        in: path
        schema:
          type: integer
          example: 5
        required: true
      responses:
        '200':
          description: Task updated
          content:
            application/json:
              examples:
                Task updated:
                  value:
                    data:
                      id: '560'
                      type: task
                      attributes:
                        name: Neal Donnelly
                        created_at: '2022-07-24T13:47:17.929+03:00'
                        updated_at: '2022-07-24T13:47:17.989+03:00'
                        status: in_progress
                        position: 69
                        deadline_date: 25/07/2022
                        deadline_time: '00:00'
        '404':
          description: Invalid task id
        '422':
          description: Invalid parameters
          content:
            application/json:
              examples:
                when blank position parameter:
                  value:
                    errors:
                      position:
                      - must be filled
                when task already completed:
                  value:
                    errors:
                      status:
                      - The task is done. You can`t edit completed task.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - task
              properties:
                name:
                  type: string
                  example: voluptatem
                position:
                  type: integer
                  example: 94
    delete:
      summary: Delete task
      tags:
      - Task
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: id
        in: path
        schema:
          type: integer
          example: 9
        required: true
      responses:
        '204':
          description: Task destroyed
        '404':
          description: Invalid task id
        '401':
          description: Invalid token
  "/api/v1/tasks/{id}/set_deadline":
    put:
      summary: Set task deadline
      tags:
      - Task
      security:
      - Bearer: {}
      parameters:
      - name: Authorization
        in: header
        description: Access token
        schema:
          type: string
      - name: id
        in: path
        schema:
          type: integer
          example: 8
        required: true
      responses:
        '200':
          description: Task deadline updated
          content:
            application/json:
              examples:
                Task deadline updated:
                  value:
                    data:
                      id: '567'
                      type: task
                      attributes:
                        name: ipsa
                        created_at: '2022-07-24T13:47:18.413+03:00'
                        updated_at: '2022-07-24T13:47:18.413+03:00'
                        status: in_progress
                        position: 1
                        deadline_date: 25/07/2022
                        deadline_time: '00:00'
        '404':
          description: Invalid task id
        '422':
          description: Invalid params
          content:
            application/json:
              examples:
                when task already completed:
                  value:
                    errors:
                      status:
                      - The task is done. You can`t edit completed task.
                when blank deadline parameter:
                  value:
                    errors:
                      deadline:
                      - The field is required.
                      - Deadline cann`t be in past
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - task
              properties:
                deadline:
                  type: string
                  example: '2022-07-24T13:47:14+03:00'
  "/api/v1/user":
    post:
      summary: Create user
      tags:
      - User
      security:
      - Bearer: {}
      parameters: []
      responses:
        '201':
          description: Created
          content:
            application/json:
              examples:
                Created:
                  value:
                    data:
                      id: '729'
                      type: user
                      attributes:
                        username: Irena Kozey
                        created_at: '2022-07-24T13:47:19.036+03:00'
                        updated_at: '2022-07-24T13:47:19.036+03:00'
                      relationships:
                        projects:
                          data: []
        '422':
          description: User name already exists
          content:
            application/json:
              examples:
                Invalid params:
                  value:
                    errors:
                      username:
                      - The field is required.
                      password:
                      - The field is required.
                User name already exists:
                  value:
                    errors:
                      username:
                      - This login is already registered. Please, log in.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - user
              properties:
                user:
                  type: object
                  required:
                  - username
                  - password
                  - password_confirmation
                  properties:
                    username:
                      type: string
                      example: larondaxx
                    password:
                      type: string
                      example: qwerty12
                    password_confirmation:
                      type: string
                      example: qwerty12
servers:
- url: https://{defaultHost}
  variables:
    defaultHost:
      default: localhost:3000
